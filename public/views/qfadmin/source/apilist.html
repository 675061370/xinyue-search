<!DOCTYPE html>
<html>

<head>
    <title>æ¥å£é…ç½®</title>
    {include file="common/header"/}
    <el-form :inline="true">
        <el-form-item>
            <el-button icon="el-icon-plus" size="small" @click="clickAdd" plain>æ·»åŠ </el-button>
            <el-button icon="el-icon-paperclip" size="small" @click="window.open('/api/other/web_search?title=ä»™é€†&is_show=1', '_blank')" plain>å¤¸å…‹æµ‹è¯•å‰å°æ•°æ®</el-button>
            <el-button icon="el-icon-paperclip" size="small" @click="window.open('/api/other/web_search?title=ä»™é€†&is_show=1&is_type=2', '_blank')" plain>ç™¾åº¦æµ‹è¯•å‰å°æ•°æ®</el-button>
            
        </el-form-item>
    </el-form>
    <el-table :data="dataList" v-loading="loading">
        <el-table-column prop="id" label="ID" width="60">
        </el-table-column>
        <el-table-column label="ç½‘ç›˜ç±»å‹" width="100" prop="name">
            <template slot-scope="scope">
                <span v-if="scope.row.pantype==2">ç™¾åº¦ç½‘ç›˜</span>
                <span v-else>å¤¸å…‹ç½‘ç›˜</span>
            </template>
        </el-table-column>
        <el-table-column label="çº¿è·¯åç§°" prop="name"></el-table-column>
        <el-table-column label="åœ°å€" prop="url"></el-table-column>
        <el-table-column label="ç±»å‹" width="100" prop="name">
            <template slot-scope="scope">
                <span v-if="scope.row.type=='html'">ç½‘é¡µ</span>
                <span v-else-if="scope.row.type=='tg'">TGé¢‘é“</span>
                <span v-else>æ¥å£</span>
            </template>
        </el-table-column>
        <el-table-column prop="count" label="è·å–èµ„æºæ•°"  width="150" align="center">
        </el-table-column>
        <el-table-column label="æ˜¯å¦å¼€å¯" width="100" align="center">
            <template slot-scope="scope">
                <el-switch v-model="scope.row.status==1?true:false"
                    @change="clickStatus(scope.row)">
                </el-switch>
            </template>
        </el-table-column>
        <el-table-column prop="weight" label="æ’åº"  width="100" align="center">
        </el-table-column>
        <el-table-column label="æ“ä½œ" width="200">
            <template slot-scope="scope">
                <el-link type="primary" @click="clickEdit(scope.row)" :underline="false">ç¼–è¾‘</el-link>&nbsp;&nbsp;&nbsp;&nbsp;
                <el-link type="danger" @click="clickDelete(scope.row)" :underline="false">åˆ é™¤</el-link>
            </template>
        </el-table-column>
    </el-table>


    <!-- æ·»åŠ æ¡† -->
    <el-dialog title="æ·»åŠ çº¿è·¯" :visible.sync="dialogFormAdd" width="750px" :modal-append-to-body='false' append-to-body :close-on-click-modal='false'>
        <el-form :model="formAdd" :rules="rules" ref="formAdd">

            <el-form-item prop="pantype" label="ç½‘ç›˜ç±»å‹" :label-width="formLabelWidth">
                <el-radio-group v-model="formAdd.pantype">
                    <el-radio :label="0">å¤¸å…‹ç½‘ç›˜</el-radio>
                    <el-radio :label="2">ç™¾åº¦ç½‘ç›˜</el-radio>
                </el-radio-group>
            </el-form-item>
            
            <el-form-item prop="name" label="çº¿è·¯åç§°" :label-width="formLabelWidth">
                <el-input size="medium" autocomplete="off" v-model="formAdd.name"></el-input>
            </el-form-item>

            <el-form-item prop="count" label="æ€»æ•°é™åˆ¶" :label-width="formLabelWidth">
                <el-input-number v-model="formAdd.count" :min="0" :max="999" size="medium" style="width: 120px;"
                    controls-position="right"></el-input-number>
                <span style="color: #999;">å»ºè®®æœ€å¤§è®¾ç½®ä¸º5ï¼Œå³è¯¥æ¥å£æœ€å¤šåªè·å–5æ¡æ•°æ®</span>
            </el-form-item>

            <el-form-item prop="type" label="ç±»å‹" :label-width="formLabelWidth">
                <el-radio-group v-model="formAdd.type">
                    <el-radio label="api">APIæ¥å£</el-radio>
                    <el-radio label="tg">TGé¢‘é“</el-radio>
                    <el-radio label="html">ç½‘é¡µçˆ¬è™«</el-radio>
                </el-radio-group>
                <p style="color: red;" v-if="formAdd.type=='html'">ä¸æ¨èï¼ç½‘é¡µçˆ¬è™«ï¼šé…ç½®å¤æ‚ï¼Œè¯·è‡ªè¡Œçœ‹æè¿°ï¼›åŠŸèƒ½ç”±AIç¼–å†™ï¼Œå¦‚æ— æ³•è·å–ä¹Ÿæ²¡æ³•ğŸ˜„</p>
                <p style="color: red;" v-else-if="formAdd.type=='tg'">å›½å†…æœåŠ¡å™¨æ— æ³•ä½¿ç”¨ï¼›æ¯”å¦‚ï¼šhttps://t.me/s/NewQuark  å°±å¡«å†™NewQuarkå³å¯</p>
            </el-form-item>

            <el-form-item prop="url" label="TGé¢‘é“" :label-width="formLabelWidth" v-if="formAdd.type === 'tg'">
                <el-input size="medium" autocomplete="off" v-model="formAdd.url"></el-input>
            </el-form-item>
            <el-form-item prop="url" label="ç›®æ ‡ç½‘å€" :label-width="formLabelWidth" v-else-if="formAdd.type === 'html'">
                <el-input size="medium" autocomplete="off" v-model="formAdd.url"></el-input>
                <span style="color: #999;">æ¯”å¦‚ï¼šhttps://www.baidu.com/s?wd={keyword}ï¼Œ{keyword}æ˜¯å›ºå®šè¯è¯·å‹¿ä¿®æ”¹</span>
            </el-form-item>
            <el-form-item prop="url" label="æ¥å£åœ°å€" :label-width="formLabelWidth" v-else>
                <el-input size="medium" autocomplete="off" v-model="formAdd.url"></el-input>
            </el-form-item>

            <block v-if="formAdd.type === 'api'">
                <el-form-item prop="method" label="è¯·æ±‚æ–¹å¼" :label-width="formLabelWidth">
                    <el-radio-group v-model="formAdd.method">
                        <el-radio label="GET">GET</el-radio>
                        <el-radio label="POST">POST</el-radio>
                    </el-radio-group>
                </el-form-item>

                <el-form-item prop="headers" label="è¯·æ±‚å¤´" :label-width="formLabelWidth">
                    <el-input type="textarea" v-model="formAdd.headers" :rows="3" placeholder='{
        "User-Agent": "..."
    }' />
                </el-form-item>
    
                <el-form-item prop="fixed_params" label="æ¥å£å‚æ•°" :label-width="formLabelWidth">
                    <el-input type="textarea" v-model="formAdd.fixed_params" :rows="3" placeholder='{"search": "{keyword}"}'></el-input>
                    <span style="color: #999;">å°†searchæ”¹ä¸ºå®é™…çš„æœç´¢å­—æ®µå³å¯ï¼Œ{keyword}è¯·å‹¿ä¿®æ”¹</span>
                </el-form-item>

                <el-form-item prop="field_map" label="å­—æ®µæ˜ å°„" :label-width="formLabelWidth">
                    <el-input type="textarea" v-model="formAdd.field_map" :rows="7" placeholder='{"title": "xxx", "url": "xxx"}'></el-input>
                    <span style="color: #999;">ç»“æ„å‚æ•°åè¯·å‹¿ä¿®æ”¹ï¼Œä»…å°†ä¸­æ–‡ä¿®æ”¹ä¸ºçœŸå®æ¥å£çš„å­—æ®µåå³å¯ï¼›æ•°ç»„å­—æ®µä¸€èˆ¬æ˜¯dataæˆ–è€…data.list</span>
                </el-form-item>
            </block>

            <block v-if="formAdd.type === 'html'">

                <el-form-item prop="html_item" label="å†…å®¹æ ‡ç­¾" :label-width="formLabelWidth">
                    <el-input size="medium" autocomplete="off" v-model="formAdd.html_item"></el-input>
                    <span style="color: #999;line-height: 1.4;display: block;">
                        è¯·å¡«å†™ç”¨äºå¾ªç¯å†…å®¹çš„ HTML æ ‡ç­¾å’Œ classï¼Œç”¨äºæå–æ•°æ®åˆ—è¡¨ã€‚æ ¼å¼ï¼šæ ‡ç­¾å+classå
                        <br>
                        ç¤ºä¾‹ï¼š<br>
                        div+item ï¼ˆé€‰æ‹©æ‰€æœ‰ class="item" çš„ div æ ‡ç­¾ï¼‰<br>
                        article+post ï¼ˆé€‰æ‹©æ‰€æœ‰ class="post" çš„ article æ ‡ç­¾ï¼‰<br>
                        li+result-item hotï¼ˆé€‰æ‹©æ‰€æœ‰ class åŒæ—¶åŒ…å« "result-item" å’Œ "hot" çš„ li æ ‡ç­¾ï¼‰
                    </span>
                </el-form-item>

                <el-form-item prop="html_title" label="æ ‡é¢˜æ ‡ç­¾" :label-width="formLabelWidth">
                    <el-input size="medium" autocomplete="off" v-model="formAdd.html_title"></el-input>
                    <span style="color: #999; line-height: 1.4; display: block;">
                        æ ‡é¢˜æ ‡ç­¾æ˜¯å¾ªç¯é¡¹ä¸­ç”¨äºæå–æ ‡é¢˜æ–‡å­—çš„å…ƒç´ ï¼›æ ¼å¼ï¼šæ ‡ç­¾å+classåã€‚<br>
                        ä¾‹å¦‚ï¼š<br>
                        h3+title è¡¨ç¤ºé€‰æ‹© `&lt;h3 class="title"&gt;` æ ‡ç­¾ä½œä¸ºæ ‡é¢˜å†…å®¹<br>
                        a+link è¡¨ç¤º `&lt;a class="link"&gt;` æ ‡ç­¾ä¸­çš„æ–‡æœ¬ä½œä¸ºæ ‡é¢˜<br>
                        div+content-title è¡¨ç¤º `&lt;div class="content-title"&gt;` æ ‡ç­¾ä½œä¸ºæ ‡é¢˜
                    </span>
                </el-form-item>

                <el-form-item prop="html_type" label="è¯¦æƒ…é¡µ" :label-width="formLabelWidth">
                    <el-radio-group v-model="formAdd.html_type">
                        <el-radio :label="0">ä¸éœ€è¦</el-radio>
                        <el-radio :label="1">éœ€è¦</el-radio>
                    </el-radio-group>
                    <p style="color: #999;">å¦‚æœç½‘ç›˜é“¾æ¥ä¸åœ¨åˆ—è¡¨é¡µä¸­ï¼Œè€Œæ˜¯éœ€è¦è¿›å…¥è¯¦æƒ…é¡µåæ‰èƒ½è·å–ï¼Œè¯·é€‰æ‹©â€œéœ€è¦â€</p>
                </el-form-item>

                <el-form-item prop="html_url" label="è¯¦æƒ…é¡µæ ‡ç­¾" :label-width="formLabelWidth" v-if="formAdd.html_type==1">
                    <el-input size="medium" autocomplete="off" v-model="formAdd.html_url"></el-input>
                    <span style="color: #999; line-height: 1.4; display: block;">
                        è¯¦æƒ…é¡µæ ‡ç­¾æ˜¯å¾ªç¯é¡¹ä¸­ç”¨äºæå–è¯¦æƒ…é¡µç½‘å€çš„å…ƒç´ ï¼›æ ¼å¼ï¼ša+classåã€‚åªèƒ½aæ ‡ç­¾<br>
                        ä¾‹å¦‚ï¼š<br>
                        a+post_url è¡¨ç¤ºè·å–å…ƒç´  `&lt;a class="post_url" href="https://.."&gt;` ä¸Šçš„hrefçš„å€¼
                    </span>
                </el-form-item>

                <el-form-item prop="html_url2" label="ç½‘ç›˜é“¾æ¥" :label-width="formLabelWidth">
                    <el-input size="medium" autocomplete="off" v-model="formAdd.html_url2"></el-input>
                    <span style="color: #999; line-height: 1.4; display: block;">
                        ç½‘ç›˜é“¾æ¥æ ‡ç­¾æ˜¯å¾ªç¯é¡¹ä¸­ç”¨äºæå–ç½‘ç›˜é“¾æ¥çš„å…ƒç´ ï¼›æ ¼å¼ï¼šæ ‡ç­¾å+classåã€‚<br>
                        å°†æå–è¯¥å…ƒç´ ç¬¬ä¸€ä¸ªå‡ºç°çš„ç½‘ç›˜é“¾æ¥
                    </span>
                </el-form-item>

            </block>
            
            <el-form-item prop="weight" label="æ’åº" :label-width="formLabelWidth">
                <el-input-number v-model="formAdd.weight" :min="0" :max="999" size="medium" style="width: 120px;"
                    controls-position="right" />
            </el-form-item>

            <el-form-item prop="status" label="æ˜¯å¦å¯ç”¨" :label-width="formLabelWidth">
                <el-switch v-model="formAdd.status" size="medium" />
            </el-form-item>
        </el-form>
        <div slot="footer" class="dialog-footer">
            <el-button type="primary" @click="postAdd()">ç¡®è®¤æ·»åŠ </el-button>
        </div>
    </el-dialog>
    <!-- ä¿®æ”¹æ¡† -->
    <el-dialog title="ä¿®æ”¹çº¿è·¯" :visible.sync="dialogFormEdit" width="750px" :modal-append-to-body='false' append-to-body :close-on-click-modal='false'>
        <el-form :model="formEdit" :rules="rules" ref="formEdit">
            <el-form-item prop="pantype" label="ç½‘ç›˜ç±»å‹" :label-width="formLabelWidth">
                <el-radio-group v-model="formEdit.pantype">
                    <el-radio :label="0">å¤¸å…‹ç½‘ç›˜</el-radio>
                    <el-radio :label="2">ç™¾åº¦ç½‘ç›˜</el-radio>
                </el-radio-group>
            </el-form-item>
            <el-form-item prop="name" label="çº¿è·¯åç§°" :label-width="formLabelWidth">
                <el-input size="medium" autocomplete="off" v-model="formEdit.name"></el-input>
            </el-form-item>

            <el-form-item prop="count" label="æ€»æ•°é™åˆ¶" :label-width="formLabelWidth">
                <el-input-number v-model="formEdit.count" :min="0" :max="999" size="medium" style="width: 120px;"
                    controls-position="right"></el-input-number>
                <span style="color: #999;">å»ºè®®æœ€å¤§è®¾ç½®ä¸º5ï¼Œå³è¯¥æ¥å£æœ€å¤šåªè·å–5æ¡æ•°æ®</span>
            </el-form-item>

            <el-form-item prop="type" label="ç±»å‹" :label-width="formLabelWidth">
                <el-radio-group v-model="formEdit.type">
                    <el-radio label="api">APIæ¥å£</el-radio>
                    <el-radio label="tg">TGé¢‘é“</el-radio>
                    <el-radio label="html">ç½‘é¡µçˆ¬è™«</el-radio>
                </el-radio-group>
                <p style="color: red;" v-if="formEdit.type=='html'">ä¸æ¨èï¼ç½‘é¡µçˆ¬è™«ï¼šé…ç½®å¤æ‚ï¼Œè¯·è‡ªè¡Œçœ‹æè¿°ï¼›åŠŸèƒ½ç”±AIç¼–å†™ï¼Œå¦‚æ— æ³•è·å–ä¹Ÿæ²¡æ³•ğŸ˜„</p>
            </el-form-item>

            <el-form-item prop="url" label="TGé¢‘é“" :label-width="formLabelWidth" v-if="formEdit.type === 'tg'">
                <el-input size="medium" autocomplete="off" v-model="formEdit.url"></el-input>
            </el-form-item>
            <el-form-item prop="url" label="ç›®æ ‡ç½‘å€" :label-width="formLabelWidth" v-else-if="formEdit.type === 'html'">
                <el-input size="medium" autocomplete="off" v-model="formEdit.url"></el-input>
                <span style="color: #999;">æ¯”å¦‚ï¼šhttps://www.baidu.com/s?wd={keyword}ï¼Œ{keyword}æ˜¯å›ºå®šè¯è¯·å‹¿ä¿®æ”¹</span>
            </el-form-item>
            <el-form-item prop="url" label="æ¥å£åœ°å€" :label-width="formLabelWidth" v-else>
                <el-input size="medium" autocomplete="off" v-model="formEdit.url"></el-input>
            </el-form-item>

            <block  v-if="formEdit.type === 'api'">
                <el-form-item prop="method" label="è¯·æ±‚æ–¹å¼" :label-width="formLabelWidth">
                    <el-radio-group v-model="formEdit.method">
                        <el-radio label="GET">GET</el-radio>
                        <el-radio label="POST">POST</el-radio>
                    </el-radio-group>
                </el-form-item>

                <el-form-item prop="headers" label="è¯·æ±‚å¤´" :label-width="formLabelWidth">
                    <el-input type="textarea" v-model="formEdit.headers" :rows="3" placeholder='{
        "User-Agent": "..."
    }' />
                </el-form-item>

                <el-form-item prop="fixed_params" label="æ¥å£å‚æ•°" :label-width="formLabelWidth">
                    <el-input type="textarea" v-model="formEdit.fixed_params" :rows="3" placeholder='{"search": "{keyword}"}'></el-input>
                    <span style="color: #999;">å°†searchæ”¹ä¸ºå®é™…çš„æœç´¢å­—æ®µå³å¯ï¼Œ{keyword}è¯·å‹¿ä¿®æ”¹</span>
                </el-form-item>

                <el-form-item prop="field_map" label="å­—æ®µæ˜ å°„" :label-width="formLabelWidth">
                    <el-input type="textarea" v-model="formEdit.field_map" :rows="7" placeholder='{"title": "xxx", "url": "xxx"}'></el-input>
                    <span style="color: #999;">ç»“æ„å‚æ•°åè¯·å‹¿ä¿®æ”¹ï¼Œä»…å°†ä¸­æ–‡ä¿®æ”¹ä¸ºçœŸå®æ¥å£çš„å­—æ®µåå³å¯ï¼›æ•°ç»„å­—æ®µä¸€èˆ¬æ˜¯dataæˆ–è€…data.list</span>
                </el-form-item>
            </block>

            <block v-if="formEdit.type === 'html'">

                <el-form-item prop="html_item" label="å†…å®¹æ ‡ç­¾" :label-width="formLabelWidth">
                    <el-input size="medium" autocomplete="off" v-model="formEdit.html_item"></el-input>
                    <span style="color: #999;line-height: 1.4;display: block;">
                        è¯·å¡«å†™ç”¨äºå¾ªç¯å†…å®¹çš„ HTML æ ‡ç­¾å’Œ classï¼Œç”¨äºæå–æ•°æ®åˆ—è¡¨ã€‚æ ¼å¼ï¼šæ ‡ç­¾å+classå
                        <br>
                        ç¤ºä¾‹ï¼š<br>
                        div+item ï¼ˆé€‰æ‹©æ‰€æœ‰ class="item" çš„ div æ ‡ç­¾ï¼‰<br>
                        article+post ï¼ˆé€‰æ‹©æ‰€æœ‰ class="post" çš„ article æ ‡ç­¾ï¼‰<br>
                        li+result-item hotï¼ˆé€‰æ‹©æ‰€æœ‰ class åŒæ—¶åŒ…å« "result-item" å’Œ "hot" çš„ li æ ‡ç­¾ï¼‰
                    </span>
                </el-form-item>

                <el-form-item prop="html_title" label="æ ‡é¢˜æ ‡ç­¾" :label-width="formLabelWidth">
                    <el-input size="medium" autocomplete="off" v-model="formEdit.html_title"></el-input>
                    <span style="color: #999; line-height: 1.4; display: block;">
                        æ ‡é¢˜æ ‡ç­¾æ˜¯å¾ªç¯é¡¹ä¸­ç”¨äºæå–æ ‡é¢˜æ–‡å­—çš„å…ƒç´ ï¼›æ ¼å¼ï¼šæ ‡ç­¾å+classåã€‚<br>
                        ä¾‹å¦‚ï¼š<br>
                        h3+title è¡¨ç¤ºé€‰æ‹© `&lt;h3 class="title"&gt;` æ ‡ç­¾ä½œä¸ºæ ‡é¢˜å†…å®¹<br>
                        a+link è¡¨ç¤º `&lt;a class="link"&gt;` æ ‡ç­¾ä¸­çš„æ–‡æœ¬ä½œä¸ºæ ‡é¢˜<br>
                        div+content-title è¡¨ç¤º `&lt;div class="content-title"&gt;` æ ‡ç­¾ä½œä¸ºæ ‡é¢˜
                    </span>
                </el-form-item>

                <el-form-item prop="html_type" label="è¯¦æƒ…é¡µ" :label-width="formLabelWidth">
                    <el-radio-group v-model="formEdit.html_type">
                        <el-radio :label="0">ä¸éœ€è¦</el-radio>
                        <el-radio :label="1">éœ€è¦</el-radio>
                    </el-radio-group>
                    <p style="color: #999;">å¦‚æœç½‘ç›˜é“¾æ¥ä¸åœ¨åˆ—è¡¨é¡µä¸­ï¼Œè€Œæ˜¯éœ€è¦è¿›å…¥è¯¦æƒ…é¡µåæ‰èƒ½è·å–ï¼Œè¯·é€‰æ‹©â€œéœ€è¦â€</p>
                </el-form-item>

                <el-form-item prop="html_url" label="è¯¦æƒ…é¡µæ ‡ç­¾" :label-width="formLabelWidth" v-if="formEdit.html_type==1">
                    <el-input size="medium" autocomplete="off" v-model="formEdit.html_url"></el-input>
                    <span style="color: #999; line-height: 1.4; display: block;">
                        è¯¦æƒ…é¡µæ ‡ç­¾æ˜¯å¾ªç¯é¡¹ä¸­ç”¨äºæå–è¯¦æƒ…é¡µç½‘å€çš„å…ƒç´ ï¼›æ ¼å¼ï¼ša+classåã€‚åªèƒ½aæ ‡ç­¾<br>
                        ä¾‹å¦‚ï¼š<br>
                        a+post_url è¡¨ç¤ºè·å–å…ƒç´  `&lt;a class="post_url" href="https://.."&gt;` ä¸Šçš„hrefçš„å€¼
                    </span>
                </el-form-item>

                <el-form-item prop="html_url2" label="ç½‘ç›˜é“¾æ¥" :label-width="formLabelWidth">
                    <el-input size="medium" autocomplete="off" v-model="formEdit.html_url2"></el-input>
                    <span style="color: #999; line-height: 1.4; display: block;">
                        ç½‘ç›˜é“¾æ¥æ ‡ç­¾æ˜¯å¾ªç¯é¡¹ä¸­ç”¨äºæå–ç½‘ç›˜é“¾æ¥çš„å…ƒç´ ï¼›æ ¼å¼ï¼šæ ‡ç­¾å+classåã€‚<br>
                        å°†æå–è¯¥å…ƒç´ ç¬¬ä¸€ä¸ªå‡ºç°çš„ç½‘ç›˜é“¾æ¥
                    </span>
                </el-form-item>

            </block>
            
            <el-form-item prop="weight" label="æ’åº" :label-width="formLabelWidth">
                <el-input-number v-model="formEdit.weight" :min="0" :max="999" size="medium" style="width: 120px;"
                    controls-position="right" />
            </el-form-item>

            <el-form-item prop="status" label="æ˜¯å¦å¯ç”¨" :label-width="formLabelWidth">
                <el-switch v-model="formEdit.status" size="medium" />
            </el-form-item>
        </el-form>
        <div slot="footer" class="dialog-footer">
            <el-button type="primary" @click="postEdit()">ç¡®è®¤ä¿®æ”¹</el-button>
        </div>
    </el-dialog>

    {include file="common/footer"/}
    <script>
        var app = new Vue({
            el: '#app',
            data() {
                this.getList();
                return {
                    formLabelWidth: '90px',
                    dialogFormAdd: false,
                    dialogFormEdit: false,
                    loading: true,
                    dataList: [],
                    selectList: [],
                    formAdd: {
                    },
                    formEdit: {
                    },
                    rules: {
                        name: [ { required: true, message: 'è¯·è¾“å…¥åˆ†ç±»åç§°', trigger: 'blur' }],
                    },
                }
            },
            methods: {
                postEdit() {
                    var that = this;
                    that.$refs["formEdit"].validate((valid) => {
                        if (valid) {
                            axios.post('/admin/api_list/update', Object.assign({}, PostBase, that.formEdit))
                                .then(function (response) {
                                    that.getList();
                                    if (response.data.code == CODE_SUCCESS) {
                                        that.$message({
                                            message: response.data.message,
                                            type: 'success'
                                        });
                                        that.dialogFormEdit = false;
                                    } else {
                                        that.$message.error(response.data.message);
                                    }
                                })
                                .catch(function (error) {
                                    that.$message.error('æœåŠ¡å™¨å†…éƒ¨é”™è¯¯');
                                });
                        }
                    });
                },
                postAdd() {
                    var that = this;
                    that.$refs['formAdd'].validate((valid) => {
                        if (valid) {
                            axios.post('/admin/api_list/add', Object.assign({}, PostBase, that.formAdd))
                                .then(function (response) {
                                    that.getList();
                                    if (response.data.code == CODE_SUCCESS) {
                                        that.$message({
                                            message: response.data.message,
                                            type: 'success'
                                        });
                                        that.dialogFormAdd = false;
                                    } else {
                                        that.$message.error(response.data.message);
                                    }
                                })
                                .catch(function (error) {
                                    that.$message.error('æœåŠ¡å™¨å†…éƒ¨é”™è¯¯');
                                });
                        }
                    });
                },
                clickAdd() {
                    var that = this;
                    that.formAdd = {
                        pantype: 0,
                        type: 'api',
                        method: 'GET',
                        weight: 0,
                        count: 5,
                        status: true,
                        html_type: 0,
                        fixed_params: `{
    "search": "{keyword}"
}`,
                        field_map: `{
    "list_path": "æ•°ç»„å­—æ®µ",
    "fields": {
        "title": "èµ„æºåç§°",
        "url": "èµ„æºåœ°å€"
    }
}`
                     };
                     
                    that.dialogFormAdd = true;
                },
                clickDelete(row) {
                    var that = this;
                    this.$confirm('å³å°†åˆ é™¤è¿™ä¸ªåˆ†ç±», æ˜¯å¦ç¡®è®¤?', 'åˆ é™¤æé†’', {
                        confirmButtonText: 'åˆ é™¤',
                        cancelButtonText: 'å–æ¶ˆ',
                        type: 'warning'
                    }).then(() => {
                        axios.post('/admin/api_list/delete', Object.assign({}, PostBase, {
                            id: row.id
                        }))
                            .then(function (response) {
                                that.getList();
                                if (response.data.code == CODE_SUCCESS) {
                                    that.$message({
                                        message: response.data.message,
                                        type: 'success'
                                    });
                                } else {
                                    that.$message.error(response.data.message);
                                }
                            })
                            .catch(function (error) {
                                that.$message.error('æœåŠ¡å™¨å†…éƒ¨é”™è¯¯');
                            });
                    }).catch(() => {
                    });
                },
                clickEdit(row) {
                    var that = this;
                    that.formEdit = row;
                    axios.post('/admin/api_list/detail', Object.assign({}, PostBase, {
                        id: row.id
                    }))
                        .then(function (response) {
                            if (response.data.code == CODE_SUCCESS) {
                                that.formEdit = response.data.data;
                                that.formEdit.status = that.formEdit.status==1?true:false;
                                that.dialogFormEdit = true;
                            } else {
                                that.$message.error(response.data.message);
                            }
                        })
                        .catch(function (error) {
                            that.$message.error('æœåŠ¡å™¨å†…éƒ¨é”™è¯¯');
                        });

                },
                getList() {
                    var that = this;
                    that.loading = true;
                    axios.post('/admin/api_list/getList', Object.assign({}, PostBase))
                        .then(function (response) {
                            that.loading = false;
                            if (response.data.code == CODE_SUCCESS) {
                                that.dataList = response.data.data;
                            } else {
                                that.$message.error(response.data.message);
                            }
                        })
                        .catch(function (error) {
                            that.loading = false;
                            that.$message.error('æœåŠ¡å™¨å†…éƒ¨é”™è¯¯');
                        });
                },

                clickStatus(row) {
                    var that = this;
                    let url = row.status ? '/admin/api_list/disable' : '/admin/api_list/enable'
                    axios.post(url, Object.assign({}, PostBase, {
                        id: row.id
                    }))
                        .then(function (response) {
                            that.getList();
                            if (response.data.code == CODE_SUCCESS) {
                                that.$message({
                                    message: response.data.message,
                                    type: 'success'
                                });
                            } else {
                                that.$message.error(response.data.message);
                            }
                        })
                        .catch(function (error) {
                            that.$message.error('æœåŠ¡å™¨å†…éƒ¨é”™è¯¯');
                        });
                },
  
            }
        })
    </script>


</html>