import{s as e,n as a,r as t,o as s,c as l,w as o,i as n,a as i,b as c,d,e as u,f as r,g as m,h as f,j as h,F as g,k as p,l as k,m as _,I as y,t as w}from"./index-403326e2.js";import{_ as b,H as C,F as x,a as N}from"./footer.5ed73010.js";const B=b({components:{Header:C,Footer:x},data:()=>({keyword:"",tab:0,loading:!1,hot:[],loading2:!1,newList:[]}),onLoad(){this.getHot(),this.getNew()},methods:{searchBtn(){if(!this.keyword)return e({title:"请输入关键字",icon:"none"});a({url:"/pages/index/list?keyword="+encodeURIComponent(this.keyword)}),this.keyword=""},goSearch(e){a({url:"/pages/index/list?keyword="+encodeURIComponent(e)})},getHot(){this.loading=!0,t({url:"https://duanju.abya.cn/api.php",success:e=>{let a=[],t=[];try{t=e.data.content}catch(s){}for(let l of t){let e=l.consumeNum>1e4?(l.consumeNum/1e4).toFixed(1)+"w":l.consumeNum;a.push({title:l.playletName,num:e,ranking:l.ranking})}this.hot=a},complete:()=>{this.loading=!1}})},getNew(){this.loading2=!0,t({url:uni.$api+"api/search/getNew",success:e=>{let a=[],t=[];try{t=e.data.data.items}catch(s){}for(let l of t)a.push({title:l.title,num:l.times});this.newList=a},complete:()=>{this.loading2=!1}})}}},[["render",function(e,a,t,b,C,x){const B=p("Header"),F=k,H=_,j=n,v=y,I=p("Footer");return s(),l(j,{class:"view"},{default:o((()=>[i(B),i(j,{class:"homeBox"},{default:o((()=>[i(j,{class:"logoBox"},{default:o((()=>[i(F,{class:"logo",src:N}),i(H,{class:"title"},{default:o((()=>[c("心悦搜剧")])),_:1})])),_:1}),i(j,{class:"subTitle"},{default:o((()=>[c("免费分享百万级网盘资源，致力打造顶尖网盘搜索引擎，让您畅享资源无忧！")])),_:1}),i(j,{class:"search"},{default:o((()=>[d("i",{class:"iconfont icon-sousuo"}),i(v,{type:"text",modelValue:C.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>C.keyword=e),placeholder:"输入关键字进行搜索",onKeyup:u(x.searchBtn,["enter"]),"confirm-type":"search",onConfirm:x.searchBtn},null,8,["modelValue","onKeyup","onConfirm"])])),_:1}),i(j,{class:"content"},{default:o((()=>[i(j,{class:"tabs"},{default:o((()=>[i(j,{class:r(["item",0===C.tab?"active":""]),onClick:a[1]||(a[1]=e=>C.tab=0)},{default:o((()=>[c("热门资源")])),_:1},8,["class"]),i(j,{class:r(["item",1===C.tab?"active":""]),onClick:a[2]||(a[2]=e=>C.tab=1)},{default:o((()=>[c("最新资源")])),_:1},8,["class"])])),_:1}),0===C.tab?(s(),l(j,{key:0,class:"list"},{default:o((()=>[C.loading?(s(),l(j,{key:0,class:"loading"},{default:o((()=>[c("正在努力加载中...")])),_:1})):m("",!0),(s(!0),f(g,null,h(C.hot,((e,a)=>(s(),l(j,{class:"item",key:a,onClick:a=>x.goSearch(e.title)},{default:o((()=>[i(j,{class:"name"},{default:o((()=>[c(w(e.ranking)+"、"+w(e.title),1)])),_:2},1024),i(j,{class:"num"},{default:o((()=>[c(w(e.num),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):m("",!0),1===C.tab?(s(),l(j,{key:1,class:"list"},{default:o((()=>[C.loading2?(s(),l(j,{key:0,class:"loading"},{default:o((()=>[c("正在努力加载中...")])),_:1})):m("",!0),(s(!0),f(g,null,h(C.newList,((e,a)=>(s(),l(j,{class:"item",key:a,onClick:a=>x.goSearch(e.title)},{default:o((()=>[i(j,{class:"name"},{default:o((()=>[c(w(a+1)+"、"+w(e.title),1)])),_:2},1024),i(j,{class:"num"},{default:o((()=>[c(w(e.num),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):m("",!0)])),_:1})])),_:1}),i(I)])),_:1})}],["__scopeId","data-v-07eb74b9"]]);export{B as default};
